#! /bin/sh

FONT_FAMILY='sans-serif'
FONT_SIZE=11

SCREEN_WIDTH=1920
FIELDIFS=':'
PADDING=' '

## Parsing the input params
while getopts 'f:s:' opt ; do
    case "$opt" in
        f)
            FONT_FAMILY=$OPTARG
            ;;

        s)
            FONT_SIZE=$OPTARG
            ;;
    esac
done

shift $((OPTIND - 1))

while read -r line ; do
    case $line in
        T*)
            ## Current focussed window title.
            #title="${line#?}"
            ;;

        D*)
            ## Current time and date
            timedate="${line#?}"
            ;;


    esac

    SCREEN_L1="Left side of monitor 1"
    SCREEN_R1="Right side of monitor 1"

    SCREEN_L2="Left side of monitor 2"
    SCREEN_R2=" ⭧ ${timedate} "

    SCREEN_L3="Left side of monitor 3"
    SCREEN_R3="Right side of monitor 3"

    SCREEN_O1=$(echo "$SCREEN_R1" | sed 's/\^[a-z]\+([^)]*)//g')
    SCREEN_O2=$(echo "$SCREEN_R2" | sed 's/\^[a-z]\+([^)]*)//g')
    SCREEN_O3=$(echo "$SCREEN_R3" | sed 's/\^[a-z]\+([^)]*)//g')

    SCREEN_O1=$((${#SCREEN_O1}  * FONT_SIZE))
    SCREEN_O2=$((${#SCREEN_O2}  * FONT_SIZE))
    SCREEN_O3=$((${#SCREEN_O3}  * FONT_SIZE))

    printf "%s%s%s\n" \
        "^pa($((0 * SCREEN_WIDTH)))$SCREEN_L1^pa($(((1 * SCREEN_WIDTH) - SCREEN_O1)))$SCREEN_R1" \
        "^pa($((1 * SCREEN_WIDTH)))$SCREEN_L2^pa($(((2 * SCREEN_WIDTH) - SCREEN_O2)))$SCREEN_R2" \
        "^pa($((2 * SCREEN_WIDTH)))$SCREEN_L3^pa($(((3 * SCREEN_WIDTH) - SCREEN_O3)))$SCREEN_R3"


done

# !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghi
#jklmnopqrstuvwxyz{|}~ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚ
#ÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿĀāĂăĄąĆćĈĉĊċČčĎďĐđĒēĔĕĖėĘęĚěĜĝĞğĠġĢģĤĥĦħĨĩĪ
#īĬĭĮįİıĲĳĴĵĶķĸĹĺĻļĽľĿŀŁłŃńŅņŇňŉŊŋŌōŎŏŐőŒœŔŕŖŗŘřŚśŜŝŞşŠšŢţŤťŦŧŨũŪūŬŭŮůŰűŲųŴŵŶŷŸŹź
#ŻżŽžſƀƁƂƃƄƅƆƇƈƉƊƋƌƍƎƏƐƑƒƓƔƕƖƗƘƙƚƛƜƝƞƟƠơƢƣƤƥƦƧƨƩƪƫƬƭƮƯưƱƲƳƴƵƶƷƸƹƺƻƼƽƾƿǀǁǂǃǄǅǆǇǈǉǊ
#ǋǌǍǎǏǐǑǒǓǔǕǖǗǘǙǚǛǜǝǞǟǠǡǢǣǤǥǦǧǨǩǪǫǬǭǮǯǰǱǲǳǴǵǶǷǸǹǺǻǼǽǾǿȀȁȂȃȄȅȆȇȈȉȊȋȌȍȎȏȐȑȒȓȔȕȖȗȘșȚ
#țȜȝȞȟȠȡȢȣȤȥȦȧȨȩȪȫȬȭȮȯȰȱȲȳȴȵȶȷȸȹȺȻȼȽȾȿɀɁɂɃɄɅɆɇɈɉɊɋɌɍɎɏɐɑɒɓɔɕɖɗɘəɚɛɜɝɞɟɠɡɢɣɤɥɦɧɨɩɪ
#ɫɬɭɮɯɰɱɲɳɴɵɶɷɸɹɺɻɼɽɾɿʀʁʂʃʄʅʆʇʈʉʊʋʌʍʎʏʐʑʒʓʔʕʖʗʘʙʚʛʜʝʞʟʠʡʢʣʤʥʦʧʨʩʪʫʬʭʮʯʰʱʲʳʴʵʶʷʸʹʺ
#ʻʼʽ˂˃˄˅ˆˇˈˉˊˋːˑ˘˙˚˛˜˝˞ˠˤˮ̜̟̠̤̥̪̬̰̹̺̻̼̀́̂̃̄̅̆̇̈̉̊̋̌̍̎̐̑̒̓̔̓̈́̕̚͜͡ͰͱͲͳʹ͵Ͷͷͺͻͼͽ;Ϳ΀΁΄
#΅Ά·ΈΉΊΌΎΏΐΑΒΓΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩΪΫάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώϏϐϑϒϓϔϕϖϗ
#ϘϙϚϛϜϝϞϟϠϡϢϣϤϥϦϧϨϩϪϫϬϭϮϯϰϱϲϳϴϵ϶ϷϸϹϺϻϼϽϾϿЀЁЂЃЄЅІЇЈЉЊЋЌЍЎЏАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧ
#ШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюяѐёђѓєѕіїјљњћќѝўџѠѡѢѣѤѥѦѧѨѩѪѫѬѭѮѯѰѱѲѳѴѵѶѷ
#ѸѹѺѻѼѽѾѿ҂Ґґԅلڡ߸߹ߺ౪ಠಥง฿๑ຈ༼༽ლᕗᕙᴥḀḁḂḃḄḅḆḇḈḉḊḋḌḍḎḏḐḑḒḓḔḕḖḗḘḙḚḛḜḝḞḟḠḡḢḣḤḥḦḧḨḩḪḫḬḭḮḯḰḱ
#ḲḳḴḵḶḷḸḹḺḻḼḽḾḿṀṁṂṃṄṅṆṇṈṉṊṋṌṍṎṏṐṑṒṓṔṕṖṗṘṙṚṛṜṝṞṟṠṡṢṣṤṥṦṧṨṩṪṫṬṭṮṯṰṱṲṳṴṵṶṷṸṹṺṻṼṽṾṿẀẁ
#ẂẃẄẅẆẇẈẉẊẋẌẍẎẏẐẑẒẓẔẕồ‐‑‒–—―‖‗‘’‚‛“”„‟†‡•‣․‥…‧‰‱′″‴‵‶‷‸‹›‼‽‾‿⁀⁁⁂⁃⁄⁅⁆⁇⁈⁉⁊⁋⁌⁍⁎⁏⁐⁑⁒⁓
#⁔⁕⁖⁗⁘⁙⁚⁛⁜⁝⁞⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ₀₁₂₃₄₅₆₇₈₉₊₋₌₍₎ₐₑₒₓₔₕₖₗₘₙₚₛₜ₠₡₢₣₤₥₦₧€℃℉№℗™℥Ω℧KÅℯℳℴⅬ←↑→↓
#↔↕↖↗↘↙↚↛↜↝↞↟↠↡↢↣↤↥↦↧↨↩↪↫↬↭↮↯↰↱↲↳↴↵↶↷↸↹↺↻↼↽↾↿⇀⇁⇂⇃⇄⇅⇆⇇⇈⇉⇊⇋⇌⇐⇞⇟⇥⇧⇮⇱⇲⇵⇶⇷⇸⇽⇾⇿∀∁∂∃∄∅∆∇
#∈∉∊∋∌∍∏∐∑−∓∔∕√∛∜∝∞∣∩∫∴≈≖≠≤≥≦≧⊃⊆⊕⊖⊗⊘⊙⌂⌒⌢⌣⌦⌫⎀⎈⎋⏩⏪⏫⏬⏭⏮⏯␣①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳⑴⑵⑶⑷⑸⑹⑺
#⑻⑼⑽⑾⑿⒀⒁⒂⒃⒄⒅⒆⒇⒈⒉⒊⒋⒌⒍⒎⒏⒐⒑⒒⒓⒔⒕⒖⒗⒘⒙⒚⒛⒜⒝⒞⒟⒠⒡⒢⒣⒤⒥⒦⒧⒨⒩⒪⒫⒬⒭⒮⒯⒰⒱⒲⒳⒴⒵▖▗▘▙▚▛▜▝▞▟■□▢▣▤▥▦▧▨▩▪
#▫▬▭▮▯▰▱▲△▴▵▶▷▸▹►▻▼▽▾▿◀◁◂◃◄◅◆◇◈◉◊○◌◍◎●◐◑◒◓◔◕◖◗◘◙◚◛◜◝◞◟◠◡◢◣◤◥◦◧◨◩◪◫◬◭◮◯◰◱◲◳◴◵◶◷◸◹◺
#◻◼◽◾◿☀☁☂☃☄★☆☇☈☉☐☑☖☗☞☰☱☲☳☴☵☶☷☿♀♁♂♠♡♢♣♤♥♦♧♩♪♫♬♭♮♯⚢⚣⚤⚥⚦⚧⚨⚩✈✓✔✕✖✗✘✚✛✜✝✞✟✠✡✤✥✦✧✩✪✫✳✶✿
#❁❏❐❑❒❛❜❝❞❟❠❤❥❦❬❭❮❯❰❱➊➋➌➍➎➏➐➑➒➓➔➕➖➗➘➙➚➛⟨⟩⠀⠁⠂⠃⠄⠅⠆⠇⠈⠉⠊⠋⠌⠍⠎⠏⠐⠑⠒⠓⠔⠕⠖⠗⠘⠙⠚⠛⠜⠝⠞⠟⠠⠡⠢⠣⠤⠥⠦⠧
#⠨⠩⠪⠫⠬⠭⠮⠯⠰⠱⠲⠳⠴⠵⠶⠷⠸⠹⠺⠻⠼⠽⠾⠿⡀⡁⡂⡃⡄⡅⡆⡇⡈⡉⡊⡋⡌⡍⡎⡏⡐⡑⡒⡓⡔⡕⡖⡗⡘⡙⡚⡛⡜⡝⡞⡟⡠⡡⡢⡣⡤⡥⡦⡧⡨⡩⡪⡫⡬⡭⡮⡯⡰⡱⡲⡳⡴⡵⡶⡷
#⡸⡹⡺⡻⡼⡽⡾⡿⢀⢁⢂⢃⢄⢅⢆⢇⢈⢉⢊⢋⢌⢍⢎⢏⢐⢑⢒⢓⢔⢕⢖⢗⢘⢙⢚⢛⢜⢝⢞⢟⢠⢡⢢⢣⢤⢥⢦⢧⢨⢩⢪⢫⢬⢭⢮⢯⢰⢱⢲⢳⢴⢵⢶⢷⢸⢹⢺⢻⢼⢽⢾⢿⣀⣁⣂⣃⣄⣅⣆⣇
#⣈⣉⣊⣋⣌⣍⣎⣏⣐⣑⣒⣓⣔⣕⣖⣗⣘⣙⣚⣛⣜⣝⣞⣟⣠⣡⣢⣣⣤⣥⣦⣧⣨⣩⣪⣫⣬⣭⣮⣯⣰⣱⣲⣳⣴⣵⣶⣷⣸⣹⣺⣻⣼⣽⣾⣿
# ⭐ ⭟ ⭠ ⭡ ⭢ ⭣ ⭤ ⭥ ⭦  ⭧ ⭨ ⭩ ⭪ ⭫ ⭬ ⭭ ⭮ ⭯ ⮀ ⮁ ⮂ ⮃ ⱱ ⸘
# ⮎ ⮒ ⮏ ⮑ ⮐
# ⮜ ⮞ ⮟ ⮝
#⮷ ⮸ ⮹
# ⮡ ⮦ ⮰
# ⮤ ⮩
# ⮛ ⮨ ⮘ ⮙ ⮚ ⮧ ⮽
# ⮾ ⮿ ⯀ ⯁ ⯂ ⯃ ⯄ ⯅ ⯆ ⯇ ⯈
# ⮕ ⮓ ⮔ ⮲ ⮳
# ⮫ ⮬ ⮭ ⮮ ⮯ 
# ⮴ ⮵
# ⮗ ⮢
# ⮖ ⮠ ⮣ ⮪ ⮥ ⮺ ⮻ ⮼